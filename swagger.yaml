openapi: 3.0.3
info:
  title: GIE Backend API
  description: |
    API pour la gestion des GIE (Groupement d'Int√©r√™t √âconomique)
    
    ## Fonctionnalit√©s principales
    - Authentification administrateur, client et livreur
    - Gestion des GIE
    - Gestion des clients
    - Gestion des livreurs et livraisons
    - Gestion des cat√©gories de produits
    - Gestion des produits
    - Gestion des commandes
    - Gestion des paiements
    - Gestion des r√©gions et frais de livraison
    - Gestion des adresses de livraison
    
    ## üè¢ Syst√®me Multi-GIE (Nouveau)
    L'API g√®re maintenant un syst√®me avanc√© de commandes multi-GIE avec coordination automatique :
    
    ### Fonctionnalit√©s Multi-GIE
    - **Notifications automatiques** : Chaque GIE re√ßoit un SMS quand une commande arrive
    - **Statuts par GIE** : Chaque produit a son propre statut (EN_ATTENTE, EN_PREPARATION, PRET, ANNULE)
    - **Statut global intelligent** : Calcul√© automatiquement selon les statuts individuels
    - **Notifications client intelligentes** : SMS envoy√© seulement quand TOUS les GIE sont pr√™ts
    - **Gestion des annulations partielles** : Possibilit√© d'annuler des produits sp√©cifiques
    
    ### Flux Multi-GIE
    1. **Client commande** ‚Üí Notifications envoy√©es √† tous les GIE concern√©s
    2. **GIE traitent** ‚Üí Chaque GIE marque ses produits (EN_PREPARATION ‚Üí PRET)
    3. **Syst√®me v√©rifie** ‚Üí Si tous les GIE sont pr√™ts, notification automatique au client
    4. **Livraison** ‚Üí Commande pr√™te pour la livraison
    
    ### Exemple de commande multi-GIE
    ```json
    {
      "produits": [
        {"produitId": "tomates_gie_a", "quantite": 2, "prixUnitaire": 500},
        {"produitId": "oranges_gie_b", "quantite": 3, "prixUnitaire": 300}
      ]
    }
    ```
    - **GIE A** re√ßoit : "Nouvelle commande #CMD-123 ! Produits: 2x Tomates"
    - **GIE B** re√ßoit : "Nouvelle commande #CMD-123 ! Produits: 3x Oranges"
    - **Client** re√ßoit : "Votre commande #CMD-123 est pr√™te !" (seulement quand tous pr√™ts)
    
    ## Authentification
    L'API utilise JWT pour l'authentification. Incluez le token dans le header Authorization :
    ```
    Authorization: Bearer <your-jwt-token>
    ```
    
    ## R√¥les
    - **SUPER_ADMIN** : Acc√®s complet √† toutes les fonctionnalit√©s
    - **ADMIN** : Gestion des GIE, clients, livreurs, produits et commandes
    - **CLIENT** : Acc√®s limit√© √† ses propres donn√©es
    - **LIVREUR** : Gestion des livraisons et commandes assign√©es
    
    ## Gestion des images
    L'API supporte l'upload d'images pour les produits via Cloudinary :
    - **Formats support√©s** : JPG, PNG, GIF, WebP
    - **Taille maximale** : 10MB
    - **Stockage** : Images optimis√©es et s√©curis√©es sur Cloudinary
    - **URLs** : Format HTTPS avec versioning automatique
    
    ## Syst√®me de frais de livraison
    L'API g√®re automatiquement les frais de livraison bas√©s sur les r√©gions :
    - **Frais interne** : 500 FCFA (m√™me r√©gion)
    - **Frais externe** : 2000 FCFA (r√©gions diff√©rentes)
    - **Frais sp√©cifiques** : Par adresse (optionnel)
    
    ### R√©gions disponibles
    - **Dakar** : Capitale et environs
    - **Saint-Louis** : R√©gion nord
    - **Mbour** : R√©gion c√¥ti√®re
    
    ### Exemple d'utilisation avec images
    ```bash
    # Mise √† jour d'un produit avec nouvelle image
    curl -X PUT \
      http://localhost:3003/api/produits/123e4567-e89b-12d3-a456-426614174000 \
      -H 'Authorization: Bearer <your-jwt-token>' \
      -F 'nom=Nouveau nom' \
      -F 'prix=29.99' \
      -F 'image=@/path/to/image.jpg'
    ```
    
    ### Exemple de calcul des frais de livraison
    ```bash
    # Calculer les frais entre deux r√©gions
    curl -X POST \
      http://localhost:3003/api/regions/calculate-frais-livraison \
      -H 'Content-Type: application/json' \
      -d '{
        "regionSourceId": "region-dakar-id",
        "regionDestinationId": "region-saint-louis-id"
      }'
    ```
    
    ## Syst√®me de livraison centralis√©
    L'API g√®re un syst√®me complet de livraison centralis√© avec livreurs :
    
    ### Gestion des livreurs (Admin uniquement)
    - **Cr√©ation de livreurs** : Seuls les administrateurs peuvent cr√©er des comptes livreur
    - **Gestion de l'√©quipe** : L'admin peut voir, modifier et supprimer les livreurs
    - **Affectation des r√©gions** : L'admin assigne les livreurs aux r√©gions
    - **Contr√¥le des statuts** : L'admin peut bloquer/d√©bloquer les livreurs
    
    ### Service de livraison centralis√©
    - **Acc√®s universel** : Les livreurs voient toutes les commandes de tous les GIE
    - **Aucun filtre** : Toutes les commandes sont visibles par d√©faut
    - **Service centralis√©** : Pas de restriction par r√©gion
    - **Choix libre** : Les livreurs choisissent les commandes √† livrer
    - **Contact direct** : Informations GIE et client pour chaque commande
    
    ### Fonctionnalit√©s livreur
    - **Authentification livreur** : Login d√©di√© avec JWT
    - **Vue d'ensemble** : Toutes les commandes disponibles en temps r√©el
    - **Gestion des commandes** : Assignation et suivi des livraisons
    - **Statuts de livreur** : DISPONIBLE, EN_LIVRAISON, INDISPONIBLE, BLOQUE
    - **Communication** : Appels directs aux GIE et clients
    - **Suivi complet** : Du statut de la commande √† la livraison
    
    ### Exemple d'authentification livreur
    ```bash
    # Connexion d'un livreur
    curl -X POST \
      http://localhost:3003/api/livreurs/login \
      -H 'Content-Type: application/json' \
      -d '{
        "email": "moussa.diop@livraison.com",
        "password": "password123"
      }'
    ```
    
    ### Exemple de r√©cup√©ration des commandes disponibles
    ```bash
    # R√©cup√©rer toutes les commandes disponibles (tous GIE)
    curl -X GET \
      'http://localhost:3003/api/livreurs/commandes-disponibles?page=1&limit=20' \
      -H 'Authorization: Bearer <livreur-jwt-token>'
    ```
    
    ### Exemple d'assignation de commande
    ```bash
    # Assigner une commande √† un livreur (livreurId extrait du token JWT)
    curl -X POST \
      http://localhost:3003/api/livreurs/assigner-commande \
      -H 'Content-Type: application/json' \
      -H 'Authorization: Bearer <livreur-jwt-token>' \
      -d '{
        "commandeId": "commande-456"
      }'
    ```
    
    ### Exemple de marquage comme livr√©e
    ```bash
    # Marquer une commande comme livr√©e (livreurId extrait du token JWT)
    curl -X POST \
      http://localhost:3003/api/livreurs/marquer-livree \
      -H 'Content-Type: application/json' \
      -H 'Authorization: Bearer <livreur-jwt-token>' \
      -d '{
        "commandeId": "commande-456"
      }'
    ```
    
    ### D√©pannage des erreurs courantes
    
    #### Erreur "Token invalide ou livreur non authentifi√©"
    - V√©rifiez que le livreur est correctement authentifi√©
    - Assurez-vous que le token JWT est valide et non expir√©
    - V√©rifiez que le token contient bien l'ID du livreur
    
    #### Erreur "Commande introuvable ou non assign√©e √† ce livreur"
    - V√©rifiez que la commande existe
    - Assurez-vous que la commande est bien assign√©e au livreur
    - V√©rifiez que l'ID de la commande est correct
    
    #### Erreur "Network request failed" (React Native)
    - V√©rifiez que le backend est accessible depuis l'√©mulateur
    - Utilisez `10.0.2.2:3003` pour Android Emulator
    - V√©rifiez que le port 3003 est ouvert
  version: 1.0.0
  contact:
    name: Support API GIE
    email: support@gie-api.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: http://localhost:3003/api
    description: Serveur de d√©veloppement
  - url: https://giev1-2-1.onrender.com/api
    description: Serveur de production

tags:
  - name: Sant√©
    description: Endpoints de v√©rification de l'√©tat de l'API
  - name: Authentification
    description: Endpoints d'authentification et gestion des utilisateurs
  - name: GIE
    description: Gestion des Groupements d'Int√©r√™t √âconomique
  - name: Clients
    description: Gestion des clients
  - name: Produits
    description: Gestion des produits et cat√©gories
  - name: Commandes
    description: Gestion des commandes classiques
  - name: Commandes Multi-GIE
    description: Gestion avanc√©e des commandes multi-GIE avec coordination automatique
  - name: Paiements
    description: Gestion des paiements
  - name: Livreurs
    description: Gestion des livreurs et livraisons
  - name: R√©gions
    description: Gestion des r√©gions et frais de livraison
  - name: Adresses
    description: Gestion des adresses de livraison

security:
  - bearerAuth: []

paths:
  /health:
    get:
      summary: V√©rifier l'√©tat de l'API
      description: Endpoint de sant√© pour v√©rifier que l'API fonctionne
      tags:
        - Sant√©
      responses:
        '200':
          description: API op√©rationnelle
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "API GIE Backend - Service op√©rationnel"
                  timestamp:
                    type: string
                    format: date-time
                  version:
                    type: string
                    example: "1.0.0"

  /auth/admin/login:
    post:
      summary: Connexion administrateur
      description: Authentifier un administrateur et obtenir un token JWT
      tags:
        - Authentification
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: "admin@gie.com"
                password:
                  type: string
                  example: "admin123"
      responses:
        '200':
          description: Connexion r√©ussie
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Connexion r√©ussie"
                  data:
                    type: object
                    properties:
                      administrateur:
                        $ref: '#/components/schemas/Administrateur'
                      token:
                        type: string
                        example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        '400':
          description: Donn√©es manquantes
        '401':
          description: Email ou mot de passe incorrect

  /auth/client/login:
    post:
      summary: Connexion client
      description: Authentifier un client et obtenir un token JWT
      tags:
        - Authentification
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                  example: "client@example.com"
                password:
                  type: string
                  example: "client123"
      responses:
        '200':
          description: Connexion r√©ussie
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Connexion r√©ussie"
                  data:
                    type: object
                    properties:
                      client:
                        $ref: '#/components/schemas/Client'
                      token:
                        type: string
                        example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        '400':
          description: Donn√©es manquantes
        '401':
          description: Email ou mot de passe incorrect

  /auth/admin/register:
    post:
      summary: Inscription administrateur
      description: Cr√©er un nouvel administrateur (r√©serv√© aux super admins)
      tags:
        - Authentification
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateAdministrateurDto'
      responses:
        '201':
          description: Administrateur cr√©√© avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Administrateur cr√©√© avec succ√®s"
                  data:
                    $ref: '#/components/schemas/Administrateur'
        '400':
          description: Donn√©es invalides
        '401':
          description: Non autoris√©
        '403':
          description: Acc√®s refus√© - Super admin requis

  /auth/client/register:
    post:
      summary: Inscription client
      description: Cr√©er un nouveau client (r√©serv√© aux admins)
      tags:
        - Authentification
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateClientDto'
      responses:
        '201':
          description: Client cr√©√© avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Client cr√©√© avec succ√®s"
                  data:
                    $ref: '#/components/schemas/Client'
        '400':
          description: Donn√©es invalides
        '401':
          description: Non autoris√©
        '403':
          description: Acc√®s refus√© - Admin requis


  /auth/verify-token:
    post:
      summary: V√©rifier un token
      description: V√©rifier la validit√© d'un token JWT
      tags:
        - Authentification
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                token:
                  type: string
                  example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
      responses:
        '200':
          description: Token valide
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Token valide"
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      email:
                        type: string
                      role:
                        type: string
        '401':
          description: Token invalide

  /auth/change-password:
    post:
      summary: Changer le mot de passe
      description: Changer le mot de passe de l'utilisateur connect√©
      tags:
        - Authentification
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - currentPassword
                - newPassword
              properties:
                currentPassword:
                  type: string
                  example: "ancienMotDePasse"
                newPassword:
                  type: string
                  example: "nouveauMotDePasse"
      responses:
        '200':
          description: Mot de passe modifi√© avec succ√®s
        '400':
          description: Donn√©es invalides
        '401':
          description: Non autoris√©

  /gies:
    get:
      summary: R√©cup√©rer tous les GIE
      description: R√©cup√©rer la liste des GIE avec pagination
      tags:
        - GIE
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: Num√©ro de page
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Nombre d'√©l√©ments par page
          required: false
          schema:
            type: integer
            default: 10
        - name: administrateurId
          in: query
          description: Filtrer par administrateur
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Liste des GIE r√©cup√©r√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "GIE r√©cup√©r√©s avec succ√®s"
                  data:
                    type: object
                    properties:
                      gies:
                        type: array
                        items:
                          $ref: '#/components/schemas/GIE'
                      pagination:
                        $ref: '#/components/schemas/Pagination'
        '401':
          description: Non autoris√©

    post:
      summary: Cr√©er un GIE
      description: Cr√©er un nouveau GIE
      tags:
        - GIE
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGIEDto'
      responses:
        '201':
          description: GIE cr√©√© avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "GIE cr√©√© avec succ√®s"
                  data:
                    $ref: '#/components/schemas/GIE'
        '400':
          description: Donn√©es invalides
        '401':
          description: Non autoris√©
        '403':
          description: Acc√®s refus√© - Admin requis

  /gies/search:
    get:
      summary: Rechercher des GIE
      description: Rechercher des GIE par nom, description ou email
      tags:
        - GIE
      security:
        - bearerAuth: []
      parameters:
        - name: q
          in: query
          description: Terme de recherche
          required: true
          schema:
            type: string
        - name: page
          in: query
          description: Num√©ro de page
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Nombre d'√©l√©ments par page
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Recherche effectu√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Recherche effectu√©e avec succ√®s"
                  data:
                    type: object
                    properties:
                      gies:
                        type: array
                        items:
                          $ref: '#/components/schemas/GIE'
                      pagination:
                        $ref: '#/components/schemas/Pagination'
        '400':
          description: Terme de recherche requis
        '401':
          description: Non autoris√©

  /gies/{id}:
    get:
      summary: R√©cup√©rer un GIE
      description: R√©cup√©rer les d√©tails d'un GIE par son ID
      tags:
        - GIE
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID du GIE
          required: true
          schema:
            type: string
      responses:
        '200':
          description: GIE r√©cup√©r√© avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "GIE r√©cup√©r√© avec succ√®s"
                  data:
                    $ref: '#/components/schemas/GIE'
        '404':
          description: GIE non trouv√©
        '401':
          description: Non autoris√©

    put:
      summary: Mettre √† jour un GIE
      description: Mettre √† jour les informations d'un GIE
      tags:
        - GIE
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID du GIE
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGIEDto'
      responses:
        '200':
          description: GIE mis √† jour avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "GIE mis √† jour avec succ√®s"
                  data:
                    $ref: '#/components/schemas/GIE'
        '400':
          description: Donn√©es invalides
        '404':
          description: GIE non trouv√©
        '401':
          description: Non autoris√©
        '403':
          description: Acc√®s refus√© - Admin requis

    delete:
      summary: Supprimer un GIE
      description: Supprimer un GIE
      tags:
        - GIE
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID du GIE
          required: true
          schema:
            type: string
      responses:
        '200':
          description: GIE supprim√© avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "GIE supprim√© avec succ√®s"
        '404':
          description: GIE non trouv√©
        '401':
          description: Non autoris√©
        '403':
          description: Acc√®s refus√© - Admin requis

  /gies/{id}/status:
    patch:
      summary: Changer le statut d'un GIE
      description: Modifier le statut d'un GIE (ACTIF, INACTIF, SUSPENDU)
      tags:
        - GIE
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID du GIE
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - statut
              properties:
                statut:
                  type: string
                  enum: [ACTIF, INACTIF, SUSPENDU]
                  example: "ACTIF"
      responses:
        '200':
          description: Statut mis √† jour avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Statut du GIE mis √† jour avec succ√®s"
                  data:
                    $ref: '#/components/schemas/GIE'
        '400':
          description: Statut invalide
        '404':
          description: GIE non trouv√©
        '401':
          description: Non autoris√©
        '403':
          description: Acc√®s refus√© - Admin requis

  /gies/{id}/stats:
    get:
      summary: Statistiques d'un GIE
      description: R√©cup√©rer les statistiques d'un GIE
      tags:
        - GIE
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID du GIE
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Statistiques r√©cup√©r√©es avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Statistiques r√©cup√©r√©es avec succ√®s"
                  data:
                    type: object
                    properties:
                      totalProduits:
                        type: integer
                        example: 25
                      totalCommandes:
                        type: integer
                        example: 150
                      totalVentes:
                        type: number
                        example: 12500.50
        '404':
          description: GIE non trouv√©
        '401':
          description: Non autoris√©
        '403':
          description: Acc√®s refus√© - Admin requis

  /produits:
    get:
      summary: R√©cup√©rer tous les produits
      description: R√©cup√©rer la liste des produits avec pagination
      tags:
        - Produits
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: Num√©ro de page
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Nombre d'√©l√©ments par page
          required: false
          schema:
            type: integer
            default: 10
        - name: gieId
          in: query
          description: Filtrer par GIE
          required: false
          schema:
            type: string
      responses:
        '200':
          description: Liste des produits r√©cup√©r√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Produits r√©cup√©r√©s avec succ√®s"
                  data:
                    type: object
                    properties:
                      produits:
                        type: array
                        items:
                          $ref: '#/components/schemas/Produit'
                      pagination:
                        $ref: '#/components/schemas/Pagination'
        '401':
          description: Non autoris√©

    post:
      summary: Cr√©er un produit
      description: Cr√©er un nouveau produit
      tags:
        - Produits
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                nom:
                  type: string
                  example: "Tomates Bio"
                quantite:
                  type: string
                  example: "100L"
                description:
                  type: string
                  example: "Tomates biologiques fra√Æches du jardin"
                prix:
                  type: number
                  format: float
                  example: 2.50
                stock:
                  type: integer
                  example: 100
                categorieId:
                  type: string
                  description: ID de la cat√©gorie du produit (optionnel)
                  example: "cat-1"
                image:
                  type: string
                  format: binary
                  description: Image du produit
            encoding:
              image:
                contentType: image/*
      responses:
        '201':
          description: Produit cr√©√© avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Produit cr√©√© avec succ√®s"
                  data:
                    $ref: '#/components/schemas/Produit'
        '400':
          description: |
            Donn√©es invalides
            - Prix n√©gatif ou √©gal √† z√©ro
            - Stock n√©gatif
            - Cat√©gorie non trouv√©e (categorieId invalide)
        '401':
          description: Non autoris√©
        '403':
          description: Acc√®s refus√© - Admin requis

  /produits/search:
    get:
      summary: Rechercher des produits
      description: Rechercher des produits par nom, description ou nom de cat√©gorie
      tags:
        - Produits
      security:
        - bearerAuth: []
      parameters:
        - name: q
          in: query
          description: Terme de recherche
          required: true
          schema:
            type: string
        - name: page
          in: query
          description: Num√©ro de page
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Nombre d'√©l√©ments par page
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Recherche effectu√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Recherche effectu√©e avec succ√®s"
                  data:
                    type: object
                    properties:
                      produits:
                        type: array
                        items:
                          $ref: '#/components/schemas/Produit'
                      pagination:
                        $ref: '#/components/schemas/Pagination'
        '400':
          description: Terme de recherche requis
        '401':
          description: Non autoris√©

  /produits/category/{categorieId}:
    get:
      summary: Produits par cat√©gorie
      description: R√©cup√©rer les produits d'une cat√©gorie sp√©cifique par son ID
      tags:
        - Produits
      security:
        - bearerAuth: []
      parameters:
        - name: categorieId
          in: path
          description: ID de la cat√©gorie
          required: true
          schema:
            type: string
            example: "cat-1"
        - name: page
          in: query
          description: Num√©ro de page
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Nombre d'√©l√©ments par page
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Produits r√©cup√©r√©s avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Produits r√©cup√©r√©s avec succ√®s"
                  data:
                    type: object
                    properties:
                      produits:
                        type: array
                        items:
                          $ref: '#/components/schemas/Produit'
                      pagination:
                        $ref: '#/components/schemas/Pagination'
        '401':
          description: Non autoris√©

  /produits/out-of-stock:
    get:
      summary: Produits en rupture de stock
      description: R√©cup√©rer les produits en rupture ou hors stock
      tags:
        - Produits
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: Num√©ro de page
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Nombre d'√©l√©ments par page
          required: false
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Produits en rupture r√©cup√©r√©s avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Produits en rupture r√©cup√©r√©s avec succ√®s"
                  data:
                    type: object
                    properties:
                      produits:
                        type: array
                        items:
                          $ref: '#/components/schemas/Produit'
                      pagination:
                        $ref: '#/components/schemas/Pagination'
        '401':
          description: Non autoris√©
        '403':
          description: Acc√®s refus√© - Admin requis

  /produits/{id}:
    get:
      summary: R√©cup√©rer un produit
      description: R√©cup√©rer les d√©tails d'un produit par son ID
      tags:
        - Produits
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID du produit
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Produit r√©cup√©r√© avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Produit r√©cup√©r√© avec succ√®s"
                  data:
                    $ref: '#/components/schemas/Produit'
        '404':
          description: Produit non trouv√©
        '401':
          description: Non autoris√©

    put:
      summary: Mettre √† jour un produit
      description: |
        Mettre √† jour les informations d'un produit avec support des images Cloudinary.
        
        **Fonctionnalit√©s :**
        - Mise √† jour des donn√©es du produit (nom, description, prix, stock, cat√©gorie)
        - Upload de nouvelle image (optionnel) - remplace automatiquement l'ancienne
        - Conservation de l'image existante si aucune nouvelle image n'est fournie
        - Suppression automatique de l'ancienne image de Cloudinary lors de l'upload d'une nouvelle
        
        **Formats d'image support√©s :** JPG, PNG, GIF, WebP
        **Taille maximale :** 10MB
      tags:
        - Produits
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID du produit √† mettre √† jour
          required: true
          schema:
            type: string
            example: "123e4567-e89b-12d3-a456-426614174000"
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                nom:
                  type: string
                  description: Nom du produit
                  example: "Tomates Bio Mises √† Jour"
                description:
                  type: string
                  description: Description du produit
                  example: "Tomates biologiques fra√Æches du jardin - nouvelle r√©colte"
                prix:
                  type: number
                  format: float
                  description: Prix du produit (doit √™tre > 0)
                  example: 3.50
                stock:
                  type: integer
                  description: Quantit√© en stock (doit √™tre >= 0)
                  example: 75
                categorieId:
                  type: string
                  description: ID de la cat√©gorie du produit (optionnel)
                  example: "cat-1"
                image:
                  type: string
                  format: binary
                  description: |
                    Nouvelle image du produit (optionnel).
                    Si fournie, remplace automatiquement l'ancienne image.
                    Si non fournie, l'image existante est conserv√©e.
            encoding:
              image:
                contentType: image/*
      responses:
        '200':
          description: Produit mis √† jour avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Produit mis √† jour avec succ√®s"
                  data:
                    $ref: '#/components/schemas/Produit'
        '400':
          description: |
            Donn√©es invalides
            - Prix n√©gatif ou √©gal √† z√©ro
            - Stock n√©gatif
            - Cat√©gorie non trouv√©e (categorieId invalide)
            - Erreur lors de l'upload d'image
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Le prix doit √™tre sup√©rieur √† 0"
                  error:
                    type: string
                    example: "Erreur lors de l'upload de l'image"
        '403':
          description: |
            Acc√®s refus√©
            - Le produit ne vous appartient pas (seul le GIE propri√©taire peut modifier)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Acc√®s refus√©. Ce produit ne vous appartient pas."
        '404':
          description: Produit non trouv√©
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Produit non trouv√©"
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '500':
          description: Erreur serveur
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Erreur lors de la mise √† jour du produit"
                  error:
                    type: string
                    example: "Erreur interne du serveur"

    delete:
      summary: Supprimer un produit
      description: Supprimer un produit
      tags:
        - Produits
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID du produit
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Produit supprim√© avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Produit supprim√© avec succ√®s"
        '404':
          description: Produit non trouv√©
        '401':
          description: Non autoris√©
        '403':
          description: Acc√®s refus√© - Admin requis

  /produits/{id}/stock:
    patch:
      summary: Mettre √† jour le stock d'un produit
      description: Modifier le stock d'un produit
      tags:
        - Produits
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID du produit
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - quantite
              properties:
                quantite:
                  type: integer
                  description: Quantit√© √† ajouter (positive) ou retirer (n√©gative)
                  example: 10
      responses:
        '200':
          description: Stock mis √† jour avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Stock mis √† jour avec succ√®s"
                  data:
                    $ref: '#/components/schemas/Produit'
        '400':
          description: Quantit√© requise
        '404':
          description: Produit non trouv√©
        '401':
          description: Non autoris√©
        '403':
          description: Acc√®s refus√© - Admin requis

  /auth/gie/login:
    post:
      summary: Connexion GIE
      description: Authentifier un GIE par email OU t√©l√©phone et obtenir un token JWT
      tags:
        - Authentification
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - identifiant
                - password
              properties:
                identifiant:
                  type: string
                  example: "contact@gie-artisanat.com" # ou "+221771234567"
                password:
                  type: string
                  example: "motdepasse"
      responses:
        '200':
          description: Connexion r√©ussie
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Connexion r√©ussie"
                  data:
                    type: object
                    properties:
                      gie:
                        $ref: '#/components/schemas/GIE'
                      token:
                        type: string
                        example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        '400':
          description: Donn√©es manquantes
        '401':
          description: Identifiant ou mot de passe incorrect

  /clients:
    get:
      tags:
        - Client
      summary: Liste des clients
      responses:
        '200':
          description: Liste des clients
    post:
      tags:
        - Client
      summary: Cr√©er un client
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Client'
      responses:
        '201':
          description: Client cr√©√©

  /clients/{id}:
    get:
      tags:
        - Client
      summary: D√©tail d'un client
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: D√©tail du client

  /commandes:
    get:
      summary: R√©cup√©rer toutes les commandes
      description: |
        R√©cup√©rer la liste de toutes les commandes avec pagination et filtres.
        
        **Fonctionnalit√©s :**
        - Liste pagin√©e des commandes
        - Tri par date de commande (plus r√©centes en premier)
        - Filtres par statut, client, r√©gion
        - Inclut les informations de livraison et frais
      tags:
        - Commandes
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: Num√©ro de page
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Nombre d'√©l√©ments par page
          required: false
          schema:
            type: integer
            default: 20
        - name: statut
          in: query
          description: Filtrer par statut de commande
          required: false
          schema:
            type: string
            enum: [EN_ATTENTE, CONFIRMEE, EN_PREPARATION, EXPEDIEE, LIVREE, ANNULEE]
        - name: clientId
          in: query
          description: Filtrer par ID du client
          required: false
          schema:
            type: string
        - name: regionId
          in: query
          description: Filtrer par r√©gion de livraison (optionnel - si non fourni, toutes les commandes sont retourn√©es)
          required: false
          schema:
            type: string
            example: "region-dakar"
      responses:
        '200':
          description: Liste des commandes r√©cup√©r√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Commandes r√©cup√©r√©es avec succ√®s"
                  data:
                    type: object
                    properties:
                      commandes:
                        type: array
                        items:
                          $ref: '#/components/schemas/Commande'
                      pagination:
                        $ref: '#/components/schemas/Pagination'
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Admin requis

    post:
      summary: Cr√©er une nouvelle commande
      description: |
        Cr√©er une nouvelle commande avec calcul automatique des frais de livraison.
        
        **Fonctionnalit√©s :**
        - Calcul automatique des frais de livraison selon la r√©gion
        - Validation des produits et quantit√©s
        - Cr√©ation automatique du paiement associ√©
        - G√©n√©ration automatique du num√©ro de commande
        
        **Calcul des frais de livraison :**
        - M√™me r√©gion : frais de livraison interne
        - R√©gions diff√©rentes : frais de livraison externe
        - Frais sp√©cifiques par adresse (optionnel)
      tags:
        - Commandes
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - clientId
                - produits
              properties:
                clientId:
                  type: string
                  description: ID du client qui passe la commande
                  example: "client-123"
                regionLivraisonId:
                  type: string
                  description: ID de la r√©gion de livraison (optionnel, calcul√© automatiquement si non fourni)
                  example: "region-dakar"
                adresseLivraison:
                  type: string
                  description: Adresse de livraison d√©taill√©e
                  example: "Centre-ville Dakar, 123 Rue de la Paix, Dakar"
                produits:
                  type: array
                  description: Liste des produits command√©s
                  items:
                    type: object
                    required:
                      - produitId
                      - quantite
                    properties:
                      produitId:
                        type: string
                        description: ID du produit
                        example: "produit-1"
                      quantite:
                        type: integer
                        minimum: 1
                        description: Quantit√© command√©e
                        example: 2
      responses:
        '201':
          description: Commande cr√©√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Commande cr√©√©e avec succ√®s"
                  data:
                    $ref: '#/components/schemas/Commande'
        '400':
          description: |
            Donn√©es invalides
            - Client introuvable
            - Produit introuvable ou stock insuffisant
            - R√©gion de livraison introuvable
            - Quantit√© invalide
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Produit introuvable ou stock insuffisant"
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Client requis

  /commandes/{id}:
    get:
      summary: R√©cup√©rer une commande par ID
      description: |
        R√©cup√©rer les d√©tails complets d'une commande sp√©cifique.
        
        **Inclus :**
        - Informations de la commande
        - D√©tails du client
        - Liste des produits command√©s
        - Informations de livraison et frais
        - D√©tails du paiement associ√©
      tags:
        - Commandes
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID de la commande
          required: true
          schema:
            type: string
            example: "commande-123"
      responses:
        '200':
          description: Commande r√©cup√©r√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Commande r√©cup√©r√©e avec succ√®s"
                  data:
                    allOf:
                      - $ref: '#/components/schemas/Commande'
                      - type: object
                        properties:
                          client:
                            type: object
                            properties:
                              id:
                                type: string
                              nom:
                                type: string
                              prenom:
                                type: string
                              email:
                                type: string
                          produits:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: string
                                nom:
                                  type: string
                                prix:
                                  type: number
                                quantite:
                                  type: integer
                                total:
                                  type: number
                          paiement:
                            $ref: '#/components/schemas/Paiement'
        '404':
          description: Commande non trouv√©e
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Client ou Admin requis

    put:
      summary: Mettre √† jour le statut d'une commande
      description: |
        Modifier le statut d'une commande (authentification Admin requise).
        
        **Statuts possibles :**
        - EN_ATTENTE : Commande en attente de confirmation
        - CONFIRMEE : Commande confirm√©e
        - EN_PREPARATION : Commande en cours de pr√©paration
        - EXPEDIEE : Commande exp√©di√©e
        - LIVREE : Commande livr√©e
        - ANNULEE : Commande annul√©e
      tags:
        - Commandes
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID de la commande √† modifier
          required: true
          schema:
            type: string
            example: "commande-123"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - statut
              properties:
                statut:
                  type: string
                  enum: [EN_ATTENTE, CONFIRMEE, EN_PREPARATION, EXPEDIEE, LIVREE, ANNULEE]
                  description: Nouveau statut de la commande
                  example: "CONFIRMEE"
                dateLivraison:
                  type: string
                  format: date-time
                  description: Date de livraison pr√©vue (optionnel)
                  example: "2024-01-15T10:00:00.000Z"
      responses:
        '200':
          description: Statut de la commande mis √† jour avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Statut de la commande mis √† jour avec succ√®s"
                  data:
                    $ref: '#/components/schemas/Commande'
        '400':
          description: |
            Donn√©es invalides
            - Statut invalide
            - Impossible de modifier le statut
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Statut invalide"
        '404':
          description: Commande non trouv√©e
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Admin requis

  /commandes/client/{clientId}:
    get:
      summary: R√©cup√©rer les commandes d'un client
      description: |
        R√©cup√©rer toutes les commandes d'un client sp√©cifique.
        
        **Fonctionnalit√©s :**
        - Liste pagin√©e des commandes du client
        - Tri par date de commande (plus r√©centes en premier)
        - Filtres par statut
      tags:
        - Commandes
      security:
        - bearerAuth: []
      parameters:
        - name: clientId
          in: path
          description: ID du client
          required: true
          schema:
            type: string
            example: "client-123"
        - name: page
          in: query
          description: Num√©ro de page
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Nombre d'√©l√©ments par page
          required: false
          schema:
            type: integer
            default: 20
        - name: statut
          in: query
          description: Filtrer par statut de commande
          required: false
          schema:
            type: string
            enum: [EN_ATTENTE, CONFIRMEE, EN_PREPARATION, EXPEDIEE, LIVREE, ANNULEE]
      responses:
        '200':
          description: Commandes du client r√©cup√©r√©es avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Commandes du client r√©cup√©r√©es avec succ√®s"
                  data:
                    type: object
                    properties:
                      commandes:
                        type: array
                        items:
                          $ref: '#/components/schemas/Commande'
                      pagination:
                        $ref: '#/components/schemas/Pagination'
        '404':
          description: Client non trouv√©
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Client ou Admin requis

  /paiements:
    get:
      tags:
        - Paiement
      summary: Liste des paiements
      responses:
        '200':
          description: Liste des paiements
    post:
      tags:
        - Paiement
      summary: Cr√©er un paiement
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Paiement'
      responses:
        '201':
          description: Paiement cr√©√©

  /paiements/{id}:
    get:
      tags:
        - Paiement
      summary: D√©tail d'un paiement
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: D√©tail du paiement

  /categories:
    get:
      summary: R√©cup√©rer toutes les cat√©gories
      description: |
        R√©cup√©rer la liste de toutes les cat√©gories disponibles avec pagination.
        
        **Fonctionnalit√©s :**
        - Liste pagin√©e des cat√©gories
        - Tri par nom alphab√©tique
        - Inclut le nombre de produits par cat√©gorie
      tags:
        - Cat√©gories
      parameters:
        - name: page
          in: query
          description: Num√©ro de page
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Nombre d'√©l√©ments par page
          required: false
          schema:
            type: integer
            default: 50
      responses:
        '200':
          description: Liste des cat√©gories r√©cup√©r√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Cat√©gories r√©cup√©r√©es avec succ√®s"
                  data:
                    type: object
                    properties:
                      categories:
                        type: array
                        items:
                          $ref: '#/components/schemas/Categorie'
                      pagination:
                        $ref: '#/components/schemas/Pagination'

    post:
      summary: Cr√©er une nouvelle cat√©gorie
      description: |
        Cr√©er une nouvelle cat√©gorie de produits avec upload d'image (authentification Admin requise).
        
        **Validation :**
        - Le nom de la cat√©gorie est obligatoire
        - Le nom doit √™tre unique
        - L'image sera upload√©e vers Cloudinary automatiquement
        - La couleur est optionnelle
        
        **Format :** multipart/form-data pour l'upload d'image
      tags:
        - Cat√©gories
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - nom
              properties:
                nom:
                  type: string
                  description: Nom de la cat√©gorie (doit √™tre unique)
                  example: "√âlectronique"
                description:
                  type: string
                  description: Description de la cat√©gorie
                  example: "Produits √©lectroniques et gadgets"
                couleur:
                  type: string
                  description: Code couleur hexad√©cimal
                  example: "#3B82F6"
                image:
                  type: string
                  format: binary
                  description: Image de la cat√©gorie (JPG, PNG, GIF, WebP - Max 10MB)
      responses:
        '201':
          description: Cat√©gorie cr√©√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Cat√©gorie cr√©√©e avec succ√®s"
                  data:
                    $ref: '#/components/schemas/Categorie'
        '400':
          description: |
            Donn√©es invalides
            - Nom de cat√©gorie manquant
            - Nom de cat√©gorie d√©j√† existant
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Une cat√©gorie avec ce nom existe d√©j√†"
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Admin requis

  /categories/with-count:
    get:
      summary: R√©cup√©rer les cat√©gories avec le nombre de produits
      description: |
        R√©cup√©rer toutes les cat√©gories avec le nombre de produits associ√©s.
        Utile pour afficher des statistiques ou des badges.
      tags:
        - Cat√©gories
      responses:
        '200':
          description: Cat√©gories avec comptage r√©cup√©r√©es avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Cat√©gories r√©cup√©r√©es avec succ√®s"
                  data:
                    type: array
                    items:
                      allOf:
                        - $ref: '#/components/schemas/Categorie'
                        - type: object
                          properties:
                            _count:
                              type: object
                              properties:
                                produits:
                                  type: integer
                                  example: 15

  /categories/search:
    get:
      summary: Rechercher des cat√©gories
      description: |
        Rechercher des cat√©gories par nom ou description.
        
        **Recherche :**
        - Recherche insensible √† la casse
        - Recherche dans le nom et la description
        - R√©sultats pagin√©s
      tags:
        - Cat√©gories
      parameters:
        - name: q
          in: query
          description: Terme de recherche
          required: true
          schema:
            type: string
            example: "l√©gumes"
        - name: page
          in: query
          description: Num√©ro de page
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Nombre d'√©l√©ments par page
          required: false
          schema:
            type: integer
            default: 50
      responses:
        '200':
          description: Recherche effectu√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Recherche effectu√©e avec succ√®s"
                  data:
                    type: object
                    properties:
                      categories:
                        type: array
                        items:
                          $ref: '#/components/schemas/Categorie'
                      pagination:
                        $ref: '#/components/schemas/Pagination'
        '400':
          description: Terme de recherche requis
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Terme de recherche requis"

  /categories/{id}:
    get:
      summary: R√©cup√©rer une cat√©gorie par ID
      description: |
        R√©cup√©rer les d√©tails d'une cat√©gorie sp√©cifique avec la liste des produits associ√©s.
      tags:
        - Cat√©gories
      parameters:
        - name: id
          in: path
          description: ID de la cat√©gorie
          required: true
          schema:
            type: string
            example: "cat_legumes"
      responses:
        '200':
          description: Cat√©gorie r√©cup√©r√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Cat√©gorie r√©cup√©r√©e avec succ√®s"
                  data:
                    allOf:
                      - $ref: '#/components/schemas/Categorie'
                      - type: object
                        properties:
                          produits:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: string
                                nom:
                                  type: string
                                prix:
                                  type: number
                                stock:
                                  type: integer
                                statut:
                                  type: string
        '404':
          description: Cat√©gorie non trouv√©e
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Cat√©gorie non trouv√©e"

    put:
      summary: Mettre √† jour une cat√©gorie
      description: |
        Modifier les informations d'une cat√©gorie existante avec possibilit√© d'upload d'image (authentification Admin requise).
        
        **Validation :**
        - Le nom doit rester unique s'il est modifi√©
        - Tous les champs sont optionnels
        - Si une nouvelle image est fournie, elle sera upload√©e vers Cloudinary
        - L'ancienne image sera conserv√©e si aucune nouvelle n'est fournie
        
        **Format :** multipart/form-data pour l'upload d'image
        
        **Exemples d'utilisation :**
        
        **Mise √† jour sans image (JSON) :**
        ```bash
        curl -X PUT \
          http://localhost:3003/api/categories/cat_legumes \
          -H 'Authorization: Bearer <your-jwt-token>' \
          -H 'Content-Type: application/json' \
          -d '{
            "nom": "L√©gumes Bio",
            "description": "L√©gumes biologiques et frais",
            "couleur": "#16A34A"
          }'
        ```
        
        **Mise √† jour avec nouvelle image :**
        ```bash
        curl -X PUT \
          http://localhost:3003/api/categories/cat_legumes \
          -H 'Authorization: Bearer <your-jwt-token>' \
          -F 'nom=L√©gumes Bio' \
          -F 'description=L√©gumes biologiques et frais' \
          -F 'couleur=#16A34A' \
          -F 'image=@/path/to/new-image.jpg'
        ```
      tags:
        - Cat√©gories
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID de la cat√©gorie √† modifier
          required: true
          schema:
            type: string
            example: "cat_legumes"
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                nom:
                  type: string
                  description: Nouveau nom de la cat√©gorie
                  example: "L√©gumes Bio"
                description:
                  type: string
                  description: Nouvelle description
                  example: "L√©gumes biologiques et frais"
                couleur:
                  type: string
                  description: Nouvelle couleur
                  example: "#16A34A"
                image:
                  type: string
                  format: binary
                  description: Nouvelle image de la cat√©gorie (JPG, PNG, GIF, WebP - Max 10MB)
      responses:
        '200':
          description: Cat√©gorie mise √† jour avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Cat√©gorie mise √† jour avec succ√®s"
                  data:
                    $ref: '#/components/schemas/Categorie'
              examples:
                mise_a_jour_sans_image:
                  summary: Mise √† jour sans image
                  value:
                    success: true
                    message: "Cat√©gorie mise √† jour avec succ√®s"
                    data:
                      id: "cat_legumes"
                      nom: "L√©gumes Bio"
                      description: "L√©gumes biologiques et frais"
                      couleur: "#16A34A"
                      image: "https://res.cloudinary.com/dtpvh5zrk/image/upload/v1753962805/categories/legumes.jpg"
                      createdAt: "2025-01-15T10:00:00.000Z"
                      updatedAt: "2025-01-15T15:30:00.000Z"
                mise_a_jour_avec_image:
                  summary: Mise √† jour avec nouvelle image
                  value:
                    success: true
                    message: "Cat√©gorie mise √† jour avec succ√®s"
                    data:
                      id: "cat_legumes"
                      nom: "L√©gumes Bio"
                      description: "L√©gumes biologiques et frais"
                      couleur: "#16A34A"
                      image: "https://res.cloudinary.com/dtpvh5zrk/image/upload/v1755282889/categories/kq0ao56tjc7qyfqurizt.png"
                      createdAt: "2025-01-15T10:00:00.000Z"
                      updatedAt: "2025-01-15T15:30:00.000Z"
        '400':
          description: |
            Donn√©es invalides
            - Nom de cat√©gorie d√©j√† existant
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Une cat√©gorie avec ce nom existe d√©j√†"
        '404':
          description: Cat√©gorie non trouv√©e
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Admin requis

    delete:
      summary: Supprimer une cat√©gorie
      description: |
        Supprimer une cat√©gorie (authentification Admin requise).
        
        **S√©curit√© :**
        - Par d√©faut : Impossible de supprimer une cat√©gorie qui contient des produits
        - Avec force=true : Suppression forc√©e m√™me avec des produits (les produits deviennent orphelins)
        
        **Param√®tres :**
        - `force` (query) : Si true, force la suppression m√™me avec des produits
      tags:
        - Cat√©gories
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID de la cat√©gorie √† supprimer
          required: true
          schema:
            type: string
            example: "cmdt0dip8000pztts37c03afa"
        - name: force
          in: query
          description: Forcer la suppression m√™me si la cat√©gorie contient des produits
          required: false
          schema:
            type: boolean
            default: false
            example: true
      responses:
        '200':
          description: Cat√©gorie supprim√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Cat√©gorie supprim√©e avec succ√®s"
        '400':
          description: |
            Impossible de supprimer
            - La cat√©gorie contient des produits (utilisez force=true pour forcer)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Impossible de supprimer une cat√©gorie qui contient des produits"
                  suggestion:
                    type: string
                    example: "Utilisez le param√®tre force=true pour forcer la suppression"
        '404':
          description: Cat√©gorie non trouv√©e
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Admin requis

  /categories/default:
    post:
      summary: Cr√©er les cat√©gories par d√©faut
      description: |
        Cr√©er automatiquement les 9 cat√©gories par d√©faut du syst√®me (authentification Admin requise).
        
        **Cat√©gories cr√©√©es :**
        - L√©gumes ü•¨, Fruits üçé, C√©r√©ales üåæ, Laitiers ü•õ
        - Viandes ü•©, Poissons üêü, √âpices üå∂Ô∏è, Boissons ü•§, Autres üì¶
      tags:
        - Cat√©gories
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Cat√©gories par d√©faut cr√©√©es avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Cat√©gories par d√©faut cr√©√©es avec succ√®s"
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Admin requis

  /regions:
    get:
      summary: R√©cup√©rer toutes les r√©gions
      description: |
        R√©cup√©rer la liste de toutes les r√©gions disponibles avec leurs frais de livraison.
        
        **Fonctionnalit√©s :**
        - Liste de toutes les r√©gions
        - Tri par nom alphab√©tique
        - Inclut les frais de livraison interne et externe
        - Inclut les GIE et adresses associ√©s
      tags:
        - R√©gions
      responses:
        '200':
          description: Liste des r√©gions r√©cup√©r√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "R√©gions r√©cup√©r√©es avec succ√®s"
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Region'

    post:
      summary: Cr√©er une nouvelle r√©gion
      description: |
        Cr√©er une nouvelle r√©gion avec ses frais de livraison (authentification Admin requise).
        
        **Validation :**
        - Le nom de la r√©gion est obligatoire
        - Le nom doit √™tre unique
        - Les frais de livraison ont des valeurs par d√©faut
      tags:
        - R√©gions
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - nom
              properties:
                nom:
                  type: string
                  description: Nom de la r√©gion (doit √™tre unique)
                  example: "Thi√®s"
                description:
                  type: string
                  description: Description de la r√©gion
                  example: "R√©gion de Thi√®s"
                fraisLivraisonInterne:
                  type: number
                  description: Frais de livraison dans la m√™me r√©gion (FCFA)
                  example: 500
                fraisLivraisonExterne:
                  type: number
                  description: Frais de livraison vers d'autres r√©gions (FCFA)
                  example: 2000
      responses:
        '201':
          description: R√©gion cr√©√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "R√©gion cr√©√©e avec succ√®s"
                  data:
                    $ref: '#/components/schemas/Region'
        '400':
          description: |
            Donn√©es invalides
            - Le nom de la r√©gion est obligatoire
            - Une r√©gion avec ce nom existe d√©j√†
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Le nom de la r√©gion est obligatoire"
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Admin requis

  /regions/{id}:
    get:
      summary: R√©cup√©rer une r√©gion par ID
      description: |
        R√©cup√©rer les d√©tails d'une r√©gion sp√©cifique avec les GIE et adresses associ√©s.
      tags:
        - R√©gions
      parameters:
        - name: id
          in: path
          description: ID de la r√©gion
          required: true
          schema:
            type: string
            example: "region-dakar"
      responses:
        '200':
          description: R√©gion r√©cup√©r√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "R√©gion r√©cup√©r√©e avec succ√®s"
                  data:
                    $ref: '#/components/schemas/Region'
        '404':
          description: R√©gion non trouv√©e

    put:
      summary: Mettre √† jour une r√©gion
      description: |
        Modifier les informations d'une r√©gion existante (authentification Admin requise).
        
        **Validation :**
        - Le nom doit rester unique s'il est modifi√©
        - Tous les champs sont optionnels
      tags:
        - R√©gions
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID de la r√©gion √† modifier
          required: true
          schema:
            type: string
            example: "region-dakar"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nom:
                  type: string
                  description: Nouveau nom de la r√©gion
                  example: "Dakar M√©tropole"
                description:
                  type: string
                  description: Nouvelle description
                  example: "R√©gion m√©tropolitaine de Dakar"
                fraisLivraisonInterne:
                  type: number
                  description: Nouveaux frais de livraison interne
                  example: 600
                fraisLivraisonExterne:
                  type: number
                  description: Nouveaux frais de livraison externe
                  example: 2500
      responses:
        '200':
          description: R√©gion mise √† jour avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "R√©gion mise √† jour avec succ√®s"
                  data:
                    $ref: '#/components/schemas/Region'
        '400':
          description: |
            Donn√©es invalides
            - Une r√©gion avec ce nom existe d√©j√†
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Une r√©gion avec ce nom existe d√©j√†"
        '404':
          description: R√©gion non trouv√©e
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Admin requis

    delete:
      summary: Supprimer une r√©gion
      description: |
        Supprimer une r√©gion (authentification Admin requise).
        
        **S√©curit√© :**
        - Impossible de supprimer une r√©gion qui contient des GIE ou adresses
      tags:
        - R√©gions
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID de la r√©gion √† supprimer
          required: true
          schema:
            type: string
            example: "region-dakar"
      responses:
        '200':
          description: R√©gion supprim√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "R√©gion supprim√©e avec succ√®s"
        '400':
          description: |
            Impossible de supprimer
            - La r√©gion contient des GIE ou adresses
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Impossible de supprimer une r√©gion qui contient des GIE ou adresses"
        '404':
          description: R√©gion non trouv√©e
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Admin requis

  /regions/calculate-frais-livraison:
    post:
      summary: Calculer les frais de livraison
      description: |
        Calculer automatiquement les frais de livraison entre deux r√©gions.
        
        **Logique de calcul :**
        - M√™me r√©gion : frais de livraison interne
        - R√©gions diff√©rentes : frais de livraison externe
      tags:
        - R√©gions
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - regionSourceId
                - regionDestinationId
              properties:
                regionSourceId:
                  type: string
                  description: ID de la r√©gion source (GIE)
                  example: "region-dakar"
                regionDestinationId:
                  type: string
                  description: ID de la r√©gion de destination (livraison)
                  example: "region-saint-louis"
      responses:
        '200':
          description: Frais de livraison calcul√©s avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Frais de livraison calcul√©s avec succ√®s"
                  data:
                    type: object
                    properties:
                      fraisLivraison:
                        type: number
                        description: Frais de livraison en FCFA
                        example: 2000
        '400':
          description: |
            Donn√©es invalides
            - Les IDs des r√©gions sont obligatoires
            - R√©gion source ou destination introuvable
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Les IDs des r√©gions source et destination sont obligatoires"

  /regions/create-default:
    post:
      summary: Cr√©er les r√©gions par d√©faut
      description: |
        Cr√©er automatiquement les 3 r√©gions par d√©faut du syst√®me (authentification Admin requise).
        
        **R√©gions cr√©√©es :**
        - Dakar (frais interne: 500 FCFA, externe: 2000 FCFA)
        - Saint-Louis (frais interne: 500 FCFA, externe: 2000 FCFA)
        - Mbour (frais interne: 500 FCFA, externe: 2000 FCFA)
      tags:
        - R√©gions
      security:
        - bearerAuth: []
      responses:
        '200':
          description: R√©gions par d√©faut cr√©√©es avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "R√©gions par d√©faut cr√©√©es avec succ√®s"
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Admin requis

  /adresses:
    get:
      summary: R√©cup√©rer toutes les adresses
      description: |
        R√©cup√©rer la liste de toutes les adresses disponibles avec leurs r√©gions.
        
        **Fonctionnalit√©s :**
        - Liste de toutes les adresses
        - Tri par nom alphab√©tique
        - Inclut les informations de r√©gion
      tags:
        - Adresses
      responses:
        '200':
          description: Liste des adresses r√©cup√©r√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Adresses r√©cup√©r√©es avec succ√®s"
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Adresse'

    post:
      summary: Cr√©er une nouvelle adresse
      description: |
        Cr√©er une nouvelle adresse de livraison (authentification Admin requise).
        
        **Validation :**
        - Le nom de l'adresse est obligatoire
        - La r√©gion est obligatoire
        - Les frais sp√©cifiques sont optionnels
      tags:
        - Adresses
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - nom
                - regionId
              properties:
                nom:
                  type: string
                  description: Nom de l'adresse
                  example: "Centre-ville Dakar"
                description:
                  type: string
                  description: Description de l'adresse
                  example: "Zone centrale de Dakar"
                codePostal:
                  type: string
                  description: Code postal
                  example: "DAK001"
                fraisLivraison:
                  type: number
                  description: Frais de livraison sp√©cifiques √† cette adresse (FCFA)
                  example: 0
                regionId:
                  type: string
                  description: ID de la r√©gion associ√©e
                  example: "region-dakar"
      responses:
        '201':
          description: Adresse cr√©√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Adresse cr√©√©e avec succ√®s"
                  data:
                    $ref: '#/components/schemas/Adresse'
        '400':
          description: |
            Donn√©es invalides
            - Le nom de l'adresse et la r√©gion sont obligatoires
            - R√©gion introuvable
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Le nom de l'adresse et la r√©gion sont obligatoires"
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Admin requis

  /adresses/{id}:
    get:
      summary: R√©cup√©rer une adresse par ID
      description: |
        R√©cup√©rer les d√©tails d'une adresse sp√©cifique avec sa r√©gion.
      tags:
        - Adresses
      parameters:
        - name: id
          in: path
          description: ID de l'adresse
          required: true
          schema:
            type: string
            example: "adresse-centre-dakar"
      responses:
        '200':
          description: Adresse r√©cup√©r√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Adresse r√©cup√©r√©e avec succ√®s"
                  data:
                    $ref: '#/components/schemas/Adresse'
        '404':
          description: Adresse non trouv√©e

    put:
      summary: Mettre √† jour une adresse
      description: |
        Modifier les informations d'une adresse existante (authentification Admin requise).
        
        **Validation :**
        - Tous les champs sont optionnels
        - La r√©gion doit exister si elle est modifi√©e
      tags:
        - Adresses
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID de l'adresse √† modifier
          required: true
          schema:
            type: string
            example: "adresse-centre-dakar"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nom:
                  type: string
                  description: Nouveau nom de l'adresse
                  example: "Centre-ville Dakar M√©tropole"
                description:
                  type: string
                  description: Nouvelle description
                  example: "Zone centrale de Dakar M√©tropole"
                codePostal:
                  type: string
                  description: Nouveau code postal
                  example: "DAK001"
                fraisLivraison:
                  type: number
                  description: Nouveaux frais de livraison sp√©cifiques
                  example: 100
                regionId:
                  type: string
                  description: Nouvelle r√©gion associ√©e
                  example: "region-dakar"
      responses:
        '200':
          description: Adresse mise √† jour avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Adresse mise √† jour avec succ√®s"
                  data:
                    $ref: '#/components/schemas/Adresse'
        '400':
          description: |
            Donn√©es invalides
            - R√©gion introuvable
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "R√©gion introuvable"
        '404':
          description: Adresse non trouv√©e
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Admin requis

    delete:
      summary: Supprimer une adresse
      description: |
        Supprimer une adresse (authentification Admin requise).
      tags:
        - Adresses
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID de l'adresse √† supprimer
          required: true
          schema:
            type: string
            example: "adresse-centre-dakar"
      responses:
        '200':
          description: Adresse supprim√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Adresse supprim√©e avec succ√®s"
        '404':
          description: Adresse non trouv√©e
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Admin requis

  /adresses/region/{regionId}:
    get:
      summary: R√©cup√©rer les adresses par r√©gion
      description: |
        R√©cup√©rer toutes les adresses d'une r√©gion sp√©cifique.
      tags:
        - Adresses
      parameters:
        - name: regionId
          in: path
          description: ID de la r√©gion
          required: true
          schema:
            type: string
            example: "region-dakar"
      responses:
        '200':
          description: Adresses de la r√©gion r√©cup√©r√©es avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Adresses r√©cup√©r√©es avec succ√®s"
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Adresse'
        '404':
          description: R√©gion non trouv√©e

  /adresses/create-default:
    post:
      summary: Cr√©er les adresses par d√©faut
      description: |
        Cr√©er automatiquement les adresses par d√©faut pour toutes les r√©gions (authentification Admin requise).
        
        **Adresses cr√©√©es par r√©gion :**
        - Centre-ville (frais: 0 FCFA)
        - Banlieue (frais: 200 FCFA)
        - P√©riph√©rie (frais: 500 FCFA)
      tags:
        - Adresses
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Adresses par d√©faut cr√©√©es avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Adresses par d√©faut cr√©√©es avec succ√®s"
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Admin requis

  /produits/mes-produits:
    get:
      summary: Liste des produits du GIE connect√©
      description: R√©cup√©rer la liste de tous les produits appartenant au GIE connect√© (authentification GIE requise)
      tags:
        - Produits
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Liste des produits du GIE connect√© r√©cup√©r√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Liste des produits du GIE connect√©"
                  data:
                    type: object
                    properties:
                      produits:
                        type: array
                        items:
                          $ref: '#/components/schemas/Produit'
        '401':
          description: Non autoris√©

  /commandes/mes-commandes:
    get:
      summary: Liste des commandes du GIE connect√©
      description: R√©cup√©rer toutes les commandes contenant au moins un produit du GIE connect√© (authentification GIE requise)
      tags:
        - Commande
      security:
        - bearerAuth: []
      parameters:
        - name: statut
          in: query
          description: Filtrer par statut de commande (optionnel)
          required: false
          schema:
            type: string
            enum: [EN_ATTENTE, CONFIRMEE, EN_PREPARATION, EXPEDIEE, LIVREE, ANNULEE]
      responses:
        '200':
          description: Liste des commandes du GIE connect√© r√©cup√©r√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Commande'
        '401':
          description: Non autoris√©

  /commandes/mes-commandes/{commandeId}:
    get:
      summary: D√©tail d'une commande du GIE connect√©
      description: R√©cup√©rer le d√©tail d'une commande du GIE connect√© (authentification GIE requise)
      tags:
        - Commande
      security:
        - bearerAuth: []
      parameters:
        - name: commandeId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: D√©tail de la commande du GIE connect√©
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Commande'
        '401':
          description: Non autoris√©
        '404':
          description: Commande non trouv√©e

  /commandes/mes-commandes-stats:
    get:
      summary: Statistiques de vente du GIE connect√©
      description: Obtenir les statistiques de vente du GIE connect√© (nombre de commandes, chiffre d'affaires, produits les plus vendus)
      tags:
        - Commande
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Statistiques de vente du GIE connect√©
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      totalCommandes:
                        type: integer
                        example: 12
                      chiffreAffaires:
                        type: number
                        example: 1234.56
                      produitsLesPlusVendus:
                        type: array
                        items:
                          type: object
                          properties:
                            nom:
                              type: string
                            totalVendu:
                              type: integer
        '401':
          description: Non autoris√©

  /commandes/{id}/statut:
    patch:
      summary: Modifier le statut d'une commande
      description: Permet de modifier uniquement le statut d'une commande
      tags:
        - Commande
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: ID de la commande
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                statut:
                  type: string
                  enum: [EN_ATTENTE, CONFIRMEE, EN_PREPARATION, EXPEDIEE, LIVREE, ANNULEE]
                  example: CONFIRMEE
      responses:
        '200':
          description: Statut de la commande modifi√© avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Commande'
        '400':
          description: Donn√©es invalides
        '401':
          description: Non autoris√©
        '404':
          description: Commande non trouv√©e

  /commandes/stats-gie:
    get:
      summary: R√©cup√©rer les statistiques GIE
      description: |
        R√©cup√©rer les statistiques d√©taill√©es du GIE connect√©.
        
        **Statistiques incluses :**
        - Total des commandes
        - Commandes en attente
        - R√©partition par statut
        - Vue d'ensemble de l'activit√©
      tags:
        - Commandes Multi-GIE
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Statistiques GIE r√©cup√©r√©es avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      totalCommandes:
                        type: integer
                        example: 50
                      commandesEnAttente:
                        type: integer
                        example: 5
                      repartition:
                        type: object
                        properties:
                          EN_ATTENTE:
                            type: integer
                            example: 5
                          EN_PREPARATION:
                            type: integer
                            example: 10
                          PRET:
                            type: integer
                            example: 30
                          ANNULE:
                            type: integer
                            example: 5
        '401':
          description: Non autoris√©
        '403':
          description: Acc√®s refus√© - GIE requis

  /commandes/produit/{panierProduitId}/en-preparation:
    patch:
      summary: Marquer un produit comme en pr√©paration
      description: |
        Marquer un produit sp√©cifique comme √©tant en cours de pr√©paration.
        
        **Fonctionnalit√©s :**
        - Changement de statut de EN_ATTENTE vers EN_PREPARATION
        - Mise √† jour automatique du statut global de la commande
        - Notification au client si tous les GIE sont pr√™ts
      tags:
        - Commandes Multi-GIE
      security:
        - bearerAuth: []
      parameters:
        - name: panierProduitId
          in: path
          required: true
          schema:
            type: string
          description: ID du produit dans le panier
      responses:
        '200':
          description: Produit marqu√© comme en pr√©paration
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Produit marqu√© comme en pr√©paration"
        '401':
          description: Non autoris√©
        '403':
          description: Acc√®s refus√© - GIE requis
        '404':
          description: Produit non trouv√©

  /commandes/produit/{panierProduitId}/pret:
    patch:
      summary: Marquer un produit comme pr√™t
      description: |
        Marquer un produit sp√©cifique comme √©tant pr√™t pour la livraison.
        
        **Fonctionnalit√©s :**
        - Changement de statut vers PRET
        - Mise √† jour automatique du statut global de la commande
        - Notification automatique au client si TOUS les GIE sont pr√™ts
        - Enregistrement de la date de confirmation
      tags:
        - Commandes Multi-GIE
      security:
        - bearerAuth: []
      parameters:
        - name: panierProduitId
          in: path
          required: true
          schema:
            type: string
          description: ID du produit dans le panier
      responses:
        '200':
          description: Produit marqu√© comme pr√™t
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Produit marqu√© comme pr√™t"
        '401':
          description: Non autoris√©
        '403':
          description: Acc√®s refus√© - GIE requis
        '404':
          description: Produit non trouv√©

  /commandes/produit/{panierProduitId}/annuler:
    patch:
      summary: Annuler un produit
      description: |
        Annuler un produit sp√©cifique avec raison optionnelle.
        
        **Fonctionnalit√©s :**
        - Changement de statut vers ANNULE
        - Notification automatique au client
        - Mise √† jour du statut global de la commande
        - Possibilit√© de fournir une raison d'annulation
      tags:
        - Commandes Multi-GIE
      security:
        - bearerAuth: []
      parameters:
        - name: panierProduitId
          in: path
          required: true
          schema:
            type: string
          description: ID du produit dans le panier
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                raison:
                  type: string
                  example: "Rupture de stock"
                  description: "Raison de l'annulation (optionnel)"
      responses:
        '200':
          description: Produit annul√© avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Produit annul√© avec succ√®s"
        '401':
          description: Non autoris√©
        '403':
          description: Acc√®s refus√© - GIE requis
        '404':
          description: Produit non trouv√©


  /auth/me:
    get:
      summary: R√©cup√©rer les informations de l'utilisateur connect√©
      tags:
        - Authentification
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Informations de l'utilisateur connect√©
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    description: Informations de l'utilisateur
        '401':
          description: Non autoris√©
    patch:
      summary: Modifier les informations de l'utilisateur connect√©
      tags:
        - Authentification
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              description: "Champs √† modifier (ex: nom, email, etc.)"
            example:
              # Exemple pour un client
              nom: "Nouveau Nom"
              prenom: "Nouveau Pr√©nom"
              email: "nouveau@email.com"
              telephone: "+221700000000"
              adresse: "Nouvelle adresse"
              # Exemple pour un GIE
              # nom: "Nouveau GIE"
              # email: "nouveau@gie.com"
              # telephone: "+221700000000"
              # adresse: "Nouvelle adresse"
              # description: "Nouveau descriptif"
              # Exemple pour un administrateur
              # nom: "Admin Modifi√©"
              # prenom: "Pr√©nom Modifi√©"
              # email: "nouveladmin@email.com"
              # telephone: "+221700000000"
      responses:
        '200':
          description: Utilisateur mis √† jour
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Utilisateur mis √† jour
                  data:
                    type: object
                    description: Informations de l'utilisateur
        '400':
          description: Donn√©es invalides
        '401':
          description: Non autoris√©

  /paiements/{id}/statut:
    patch:
      summary: Modifier le statut d'un paiement
      tags:
        - Paiement
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: ID du paiement
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                statut:
                  type: string
                  enum: [EN_ATTENTE, VALIDE, ECHEC, REMBOURSE]
                  example: VALIDE
      responses:
        '200':
          description: Statut du paiement modifi√© avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    $ref: '#/components/schemas/Paiement'
        '400':
          description: Donn√©es invalides
        '401':
          description: Non autoris√©
        '404':
          description: Paiement non trouv√©

  /commandes/mes-commandes-client:
    get:
      summary: Liste des commandes du client connect√©
      description: R√©cup√©rer toutes les commandes pass√©es par le client connect√© (authentification client requise)
      tags:
        - Commande
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Liste des commandes du client connect√©
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Commande'
        '401':
          description: Non autoris√©

  /livreurs:
    get:
      summary: R√©cup√©rer tous les livreurs (Admin seulement)
      description: |
        R√©cup√©rer la liste de tous les livreurs avec pagination. **R√©serv√© aux administrateurs uniquement.**
        
        **Fonctionnalit√©s :**
        - Liste pagin√©e des livreurs
        - Tri par date de cr√©ation (plus r√©cents en premier)
        - Inclut les informations de r√©gion et nombre de commandes
        - Permet √† l'admin de g√©rer l'√©quipe de livraison
      tags:
        - Livreurs
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: Num√©ro de page
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Nombre d'√©l√©ments par page
          required: false
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: Liste des livreurs r√©cup√©r√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Livreurs r√©cup√©r√©s avec succ√®s"
                  data:
                    type: object
                    properties:
                      livreurs:
                        type: array
                        items:
                          $ref: '#/components/schemas/Livreur'
                      total:
                        type: integer
                        example: 25
                      pages:
                        type: integer
                        example: 2
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Admin requis

    post:
      summary: Cr√©er un nouveau livreur (Admin seulement)
      description: |
        Cr√©er un nouveau livreur. **R√©serv√© aux administrateurs uniquement.**
        
        **Fonctionnalit√©s :**
        - Validation des donn√©es
        - Hashage automatique du mot de passe
        - Association avec une r√©gion (optionnel)
        - V√©rification de l'unicit√© de l'email
        - Attribution automatique du statut DISPONIBLE
        
        **Processus de cr√©ation :**
        1. L'admin cr√©e le compte livreur
        2. Le livreur re√ßoit ses identifiants
        3. Le livreur peut se connecter via l'app mobile
        4. Le livreur peut voir et accepter les commandes
      tags:
        - Livreurs
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateLivreurDto'
      responses:
        '201':
          description: Livreur cr√©√© avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Livreur cr√©√© avec succ√®s"
                  data:
                    $ref: '#/components/schemas/Livreur'
        '400':
          description: |
            Donn√©es invalides
            - Email d√©j√† utilis√©
            - R√©gion introuvable
            - Donn√©es manquantes
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Email d√©j√† utilis√©"
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Admin requis

  /livreurs/login:
    post:
      summary: Authentification livreur
      description: |
        Authentifier un livreur et obtenir un token JWT.
        
        **Fonctionnalit√©s :**
        - V√©rification des identifiants
        - G√©n√©ration de token JWT
        - V√©rification du statut du compte
        - Retour des informations du livreur
      tags:
        - Livreurs
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginLivreurDto'
      responses:
        '200':
          description: Connexion r√©ussie
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Connexion r√©ussie"
                  data:
                    type: object
                    properties:
                      livreur:
                        $ref: '#/components/schemas/Livreur'
                      token:
                        type: string
                        example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        '401':
          description: |
            √âchec de l'authentification
            - Email ou mot de passe incorrect
            - Compte bloqu√©
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Email ou mot de passe incorrect"

  /livreurs/{id}:
    get:
      summary: R√©cup√©rer un livreur par ID
      description: |
        R√©cup√©rer les d√©tails complets d'un livreur sp√©cifique.
        
        **Inclus :**
        - Informations du livreur
        - R√©gion associ√©e
        - Liste des commandes assign√©es
        - D√©tails des produits et GIE pour chaque commande
      tags:
        - Livreurs
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID du livreur
          required: true
          schema:
            type: string
            example: "livreur-123"
      responses:
        '200':
          description: Livreur r√©cup√©r√© avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Livreur r√©cup√©r√© avec succ√®s"
                  data:
                    allOf:
                      - $ref: '#/components/schemas/Livreur'
                      - type: object
                        properties:
                          region:
                            $ref: '#/components/schemas/Region'
                          commandes:
                            type: array
                            items:
                              $ref: '#/components/schemas/Commande'
        '404':
          description: Livreur non trouv√©
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide

    put:
      summary: Mettre √† jour un livreur
      description: |
        Modifier les informations d'un livreur.
        
        **Fonctionnalit√©s :**
        - Mise √† jour des informations personnelles
        - Changement de statut
        - Association/d√©sassociation de r√©gion
        - Validation des donn√©es
      tags:
        - Livreurs
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID du livreur √† modifier
          required: true
          schema:
            type: string
            example: "livreur-123"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateLivreurDto'
      responses:
        '200':
          description: Livreur mis √† jour avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Livreur mis √† jour avec succ√®s"
                  data:
                    $ref: '#/components/schemas/Livreur'
        '400':
          description: |
            Donn√©es invalides
            - R√©gion introuvable
            - Donn√©es manquantes
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "R√©gion introuvable"
        '404':
          description: Livreur non trouv√©
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide

    delete:
      summary: Supprimer un livreur (Admin seulement)
      description: |
        Supprimer d√©finitivement un livreur. **R√©serv√© aux administrateurs uniquement.**
        
        **Attention :** Cette action est irr√©versible.
        
        **V√©rifications :**
        - Le livreur ne doit pas avoir de commandes en cours
        - Le livreur doit √™tre en statut DISPONIBLE ou INDISPONIBLE
      tags:
        - Livreurs
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID du livreur √† supprimer
          required: true
          schema:
            type: string
            example: "livreur-123"
      responses:
        '200':
          description: Livreur supprim√© avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Livreur supprim√© avec succ√®s"
        '404':
          description: Livreur non trouv√©
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide
        '403':
          description: Acc√®s refus√© - Admin requis

  /livreurs/{id}/commandes:
    get:
      summary: R√©cup√©rer les commandes d'un livreur
      description: |
        R√©cup√©rer toutes les commandes assign√©es √† un livreur sp√©cifique.
        
        **Fonctionnalit√©s :**
        - Liste pagin√©e des commandes
        - Tri par date de commande (plus r√©centes en premier)
        - Inclut les d√©tails complets : client, produits, GIE, paiement
        - Filtrage par statut possible
      tags:
        - Livreurs
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          description: ID du livreur
          required: true
          schema:
            type: string
            example: "livreur-123"
        - name: page
          in: query
          description: Num√©ro de page
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Nombre d'√©l√©ments par page
          required: false
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: Commandes du livreur r√©cup√©r√©es avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Commandes r√©cup√©r√©es avec succ√®s"
                  data:
                    type: object
                    properties:
                      commandes:
                        type: array
                        items:
                          $ref: '#/components/schemas/Commande'
                      total:
                        type: integer
                        example: 15
                      pages:
                        type: integer
                        example: 1
        '404':
          description: Livreur non trouv√©
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide

  /livreurs/commandes-disponibles:
    get:
      summary: R√©cup√©rer les commandes disponibles (tous GIE)
      description: |
        R√©cup√©rer **toutes** les commandes disponibles pour les livreurs, peu importe le GIE.
        
        **Service de livraison centralis√© :**
        - Les livreurs voient toutes les commandes de tous les GIE
        - Chaque commande contient les informations du GIE pour contact
        - Les livreurs peuvent choisir les commandes √† livrer
        - **Aucun filtre de r√©gion obligatoire** - toutes les commandes sont visibles
        
        **Fonctionnalit√©s :**
        - Commandes sans livreur assign√© (statut CONFIRMEE, EN_ATTENTE ou EN_PREPARATION)
        - **Service centralis√©** : Toutes les commandes de tous les GIE sont visibles
        - Inclut les informations compl√®tes : client, GIE, produits, adresse
        - Tri par date de cr√©ation (plus r√©centes en premier)
        - Informations de contact GIE pour chaque produit
        - Montants et frais de livraison calcul√©s
        
        **Service centralis√© :**
        - **Acc√®s universel** : Toutes les commandes disponibles de tous les GIE
        - **Aucun filtre** : Les livreurs voient toutes les opportunit√©s de livraison
        - **Choix libre** : Les livreurs choisissent les commandes √† livrer
      tags:
        - Livreurs
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          description: Num√©ro de page
          required: false
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: Nombre d'√©l√©ments par page
          required: false
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: Commandes disponibles r√©cup√©r√©es avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Commandes disponibles r√©cup√©r√©es avec succ√®s"
                  data:
                    type: object
                    properties:
                      commandes:
                        type: array
                        items:
                          $ref: '#/components/schemas/Commande'
                      total:
                        type: integer
                        example: 8
                      pages:
                        type: integer
                        example: 1
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide

  /livreurs/assigner-commande:
    post:
      summary: Assigner une commande √† un livreur
      description: |
        Assigner une commande disponible √† un livreur.
        
        **Fonctionnalit√©s :**
        - V√©rification de la disponibilit√© du livreur
        - V√©rification que la commande n'est pas d√©j√† assign√©e
        - Mise √† jour automatique du statut du livreur
        - Validation des permissions
      tags:
        - Livreurs
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - commandeId
              properties:
                commandeId:
                  type: string
                  description: ID de la commande √† assigner
                  example: "commande-456"
      responses:
        '200':
          description: Commande assign√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Commande assign√©e avec succ√®s"
        '400':
          description: |
            Erreur d'assignation
            - Livreur introuvable
            - Commande introuvable
            - Commande d√©j√† assign√©e
            - Livreur non disponible
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Livreur non disponible"
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide

  /livreurs/marquer-livree:
    post:
      summary: Marquer une commande comme livr√©e
      description: |
        Marquer une commande assign√©e comme livr√©e.
        
        **Fonctionnalit√©s :**
        - V√©rification que la commande est assign√©e au livreur
        - Mise √† jour du statut de la commande
        - Remise du livreur en statut DISPONIBLE
        - Enregistrement de la date de livraison
      tags:
        - Livreurs
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - commandeId
              properties:
                commandeId:
                  type: string
                  description: ID de la commande √† marquer comme livr√©e
                  example: "commande-456"
      responses:
        '200':
          description: Commande marqu√©e comme livr√©e avec succ√®s
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Commande marqu√©e comme livr√©e avec succ√®s"
        '400':
          description: |
            Erreur de mise √† jour
            - commandeId manquant
            - Commande introuvable
            - Commande non assign√©e √† ce livreur
            - Erreur de mise √† jour du statut
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    examples:
                      - "commandeId est requis"
                      - "Commande introuvable ou non assign√©e √† ce livreur"
                      - "Erreur lors de la mise √† jour du statut"
        '401':
          description: Non autoris√© - Token JWT manquant ou invalide

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    Administrateur:
      type: object
      properties:
        id:
          type: string
          example: "clx1234567890abcdef"
        email:
          type: string
          format: email
          example: "admin@gie.com"
        nom:
          type: string
          example: "Admin"
        prenom:
          type: string
          example: "Normal"
        telephone:
          type: string
          example: "+1234567890"
        role:
          type: string
          enum: [ADMIN, SUPER_ADMIN]
          example: "ADMIN"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    CreateAdministrateurDto:
      type: object
      required:
        - email
        - password
        - nom
        - prenom
      properties:
        email:
          type: string
          format: email
          example: "admin@gie.com"
        password:
          type: string
          example: "admin123"
        nom:
          type: string
          example: "Admin"
        prenom:
          type: string
          example: "Normal"
        telephone:
          type: string
          example: "+1234567890"
        role:
          type: string
          enum: [ADMIN, SUPER_ADMIN]
          default: "ADMIN"
          example: "ADMIN"

    Client:
      type: object
      properties:
        id:
          type: string
          example: "clx1234567890abcdef"
        email:
          type: string
          format: email
          example: "client@example.com"
        nom:
          type: string
          example: "Dupont"
        prenom:
          type: string
          example: "Jean"
        telephone:
          type: string
          example: "+1234567890"
        adresse:
          type: string
          example: "123 Rue du Client, Ville"
        statut:
          type: string
          enum: [ACTIF, INACTIF, BLOQUE]
          example: "ACTIF"
        administrateurId:
          type: string
          example: "clx1234567890abcdef"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    CreateClientDto:
      type: object
      required:
        - email
        - password
        - nom
        - prenom
      properties:
        email:
          type: string
          format: email
          example: "client@example.com"
        password:
          type: string
          example: "client123"
        nom:
          type: string
          example: "Dupont"
        prenom:
          type: string
          example: "Jean"
        telephone:
          type: string
          example: "+1234567890"
        adresse:
          type: string
          example: "123 Rue du Client, Ville"
        administrateurId:
          type: string
          example: "clx1234567890abcdef"

    GIE:
      type: object
      properties:
        id:
          type: string
          example: "clx1234567890abcdef"
        nom:
          type: string
          example: "GIE Agricole du Nord"
        description:
          type: string
          example: "Groupement d'int√©r√™t √©conomique sp√©cialis√© dans l'agriculture"
        adresse:
          type: string
          example: "123 Rue des Agriculteurs, Nord"
        telephone:
          type: string
          example: "+1234567890"
        email:
          type: string
          format: email
          example: "contact@gie-agricole.com"
        logo:
          type: string
          example: "https://example.com/logo.png"
        statut:
          type: string
          enum: [ACTIF, INACTIF, SUSPENDU]
          example: "ACTIF"
        regionId:
          type: string
          description: ID de la r√©gion associ√©e (optionnel)
          example: "region-dakar"
        administrateurId:
          type: string
          example: "clx1234567890abcdef"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        region:
          $ref: '#/components/schemas/Region'

    CreateGIEDto:
      type: object
      required:
        - nom
      properties:
        nom:
          type: string
          example: "GIE Agricole du Nord"
        description:
          type: string
          example: "Groupement d'int√©r√™t √©conomique sp√©cialis√© dans l'agriculture"
        adresse:
          type: string
          example: "123 Rue des Agriculteurs, Nord"
        telephone:
          type: string
          example: "+1234567890"
        email:
          type: string
          format: email
          example: "contact@gie-agricole.com"
        logo:
          type: string
          example: "https://example.com/logo.png"
        regionId:
          type: string
          description: ID de la r√©gion associ√©e (optionnel)
          example: "region-dakar"

    Categorie:
      type: object
      properties:
        id:
          type: string
          example: "cat_legumes"
        nom:
          type: string
          example: "L√©gumes"
        description:
          type: string
          example: "L√©gumes frais et biologiques"
        couleur:
          type: string
          description: Code couleur hexad√©cimal
          example: "#22C55E"
        image:
          type: string
          description: URL de l'image de la cat√©gorie
          example: "https://res.cloudinary.com/dtpvh5zrk/image/upload/v1753962805/produits/legumes.jpg"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        produits:
          type: array
          description: Liste des produits de cette cat√©gorie (optionnel)
          items:
            type: object
            properties:
              id:
                type: string
              nom:
                type: string
              prix:
                type: number
              stock:
                type: integer
              statut:
                type: string
        _count:
          type: object
          description: Nombre de produits dans cette cat√©gorie (optionnel)
          properties:
            produits:
              type: integer
              example: 15

    CreateCategorieDto:
      type: object
      required:
        - nom
      properties:
        nom:
          type: string
          description: Nom de la cat√©gorie (doit √™tre unique)
          example: "L√©gumes"
        description:
          type: string
          description: Description de la cat√©gorie
          example: "L√©gumes frais et biologiques"
        couleur:
          type: string
          description: Code couleur hexad√©cimal
          example: "#22C55E"
        image:
          type: string
          description: URL de l'image de la cat√©gorie
          example: "https://res.cloudinary.com/dtpvh5zrk/image/upload/v1753962805/produits/legumes.jpg"

    Produit:
      type: object
      properties:
        id:
          type: string
          example: "clx1234567890abcdef"
        nom:
          type: string
          example: "Tomates Bio"
        description:
          type: string
          example: "Tomates biologiques fra√Æches du jardin"
        prix:
          type: number
          format: float
          example: 2.50
        stock:
          type: integer
          example: 100
        image:
          type: string
          description: URL de l'image du produit (Cloudinary)
          example: "https://res.cloudinary.com/your-cloud/image/upload/v1234567890/produits/tomates-bio.jpg"
        statut:
          type: string
          enum: [DISPONIBLE, RUPTURE, HORS_STOCK]
          example: "DISPONIBLE"
        gieId:
          type: string
          example: "clx1234567890abcdef"
        categorieId:
          type: string
          description: ID de la cat√©gorie du produit (optionnel)
          example: "cat_legumes"
        categorie:
          $ref: '#/components/schemas/Categorie'
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    CreateProduitDto:
      type: object
      required:
        - nom
        - prix
        - stock
        - gieId
      properties:
        nom:
          type: string
          example: "Tomates Bio"
        description:
          type: string
          example: "Tomates biologiques fra√Æches du jardin"
        prix:
          type: number
          format: float
          minimum: 0
          example: 2.50
        stock:
          type: integer
          minimum: 0
          example: 100
        image:
          type: string
          description: URL de l'image du produit (Cloudinary)
          example: "https://res.cloudinary.com/your-cloud/image/upload/v1234567890/produits/tomates-bio.jpg"
        categorieId:
          type: string
          description: ID de la cat√©gorie du produit (optionnel)
          example: "cat_legumes"
        gieId:
          type: string
          example: "clx1234567890abcdef"

    Pagination:
      type: object
      properties:
        page:
          type: integer
          example: 1
        limit:
          type: integer
          example: 10
        total:
          type: integer
          example: 100
        pages:
          type: integer
          example: 10

    Error:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: "Une erreur s'est produite"
        error:
          type: string
          example: "D√©tails de l'erreur"

    Commande:
      type: object
      properties:
        id:
          type: string
          example: "commande-123"
        numero:
          type: string
          example: "CMD-2024-001"
        montant:
          type: number
          format: float
          example: 15000
        fraisLivraison:
          type: number
          format: float
          description: Frais de livraison en FCFA
          example: 500
        statut:
          type: string
          enum: [EN_ATTENTE, CONFIRMEE, EN_PREPARATION, EXPEDIEE, LIVREE, ANNULEE]
          example: "EN_ATTENTE"
        dateCommande:
          type: string
          format: date-time
        dateLivraison:
          type: string
          format: date-time
        adresseLivraison:
          type: string
          example: "123 Rue de la Livraison, Dakar"
        regionLivraisonId:
          type: string
          description: ID de la r√©gion de livraison
          example: "region-dakar"
        livreurId:
          type: string
          description: ID du livreur assign√© √† cette commande
          example: "livreur-123"
        clientId:
          type: string
          example: "client-123"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        regionLivraison:
          $ref: '#/components/schemas/Region'
        livreur:
          $ref: '#/components/schemas/Livreur'
        produits:
          type: array
          items:
            type: object
            properties:
              produitId:
                type: string
              quantite:
                type: integer

    StatutGIEProduit:
      type: string
      enum: [EN_ATTENTE, EN_PREPARATION, PRET, ANNULE]
      description: |
        Statuts possibles pour un produit dans une commande multi-GIE
        
        - **EN_ATTENTE** : Commande re√ßue, en attente de traitement par le GIE
        - **EN_PREPARATION** : Le GIE a commenc√© la pr√©paration du produit
        - **PRET** : Le produit est pr√™t pour la livraison
        - **ANNULE** : Le produit a √©t√© annul√© (rupture de stock, etc.)

    PanierProduitMultiGIE:
      type: object
      properties:
        id:
          type: string
          example: "pp_123"
        quantite:
          type: integer
          example: 2
        prixUnitaire:
          type: number
          example: 500.0
        statutGIE:
          $ref: '#/components/schemas/StatutGIEProduit'
        dateConfirmation:
          type: string
          format: date-time
          example: "2024-01-15T10:30:00Z"
          description: "Date de confirmation par le GIE (si PRET)"
        produit:
          $ref: '#/components/schemas/Produit'

    DetailsGIE:
      type: object
      properties:
        totalProduits:
          type: integer
          example: 3
          description: "Nombre total de produits du GIE dans la commande"
        produitsPrets:
          type: integer
          example: 1
          description: "Nombre de produits marqu√©s comme PRET"
        produitsEnPreparation:
          type: integer
          example: 1
          description: "Nombre de produits en cours de pr√©paration"
        produitsEnAttente:
          type: integer
          example: 1
          description: "Nombre de produits en attente de traitement"
        produitsAnnules:
          type: integer
          example: 0
          description: "Nombre de produits annul√©s"
        montantGIE:
          type: number
          example: 2500.0
          description: "Montant total des produits du GIE dans la commande"
        progression:
          type: number
          example: 33.33
          description: "Pourcentage de progression (0-100)"

    CommandeMultiGIE:
      type: object
      properties:
        id:
          type: string
          example: "cmd_123"
        numero:
          type: string
          example: "CMD-123"
        statut:
          type: string
          enum: [EN_ATTENTE, CONFIRMEE, EN_PREPARATION, EXPEDIEE, LIVREE, ANNULEE]
          description: "Statut global de la commande (calcul√© automatiquement)"
        client:
          $ref: '#/components/schemas/Client'
        panierProduits:
          type: array
          items:
            $ref: '#/components/schemas/PanierProduitMultiGIE'
        detailsGIE:
          $ref: '#/components/schemas/DetailsGIE'
        dateCommande:
          type: string
          format: date-time
        montant:
          type: number
          example: 5000.0 

    Paiement:
      type: object
      properties:
        id:
          type: string
          example: "paiement-123"
        commandeId:
          type: string
          example: "commande-123"
        montant:
          type: number
          format: float
          example: 15500
        fraisLivraison:
          type: number
          format: float
          description: Frais de livraison inclus dans le paiement (FCFA)
          example: 500
        methode:
          type: string
          enum: [CARTE_BANCAIRE, VIREMENT, ESPECES, MOBILE_MONEY, PAIEMENT_A_LA_LIVRAISON, WAVE, ORANGE_MONEY]
          example: "MOBILE_MONEY"
        statut:
          type: string
          enum: [EN_ATTENTE, VALIDE, ECHEC, REMBOURSE]
          example: "VALIDE"
        reference:
          type: string
          example: "REF-2024-001"
        datePaiement:
          type: string
          format: date-time
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    Region:
      type: object
      properties:
        id:
          type: string
          example: "region-dakar"
        nom:
          type: string
          example: "Dakar"
        description:
          type: string
          example: "R√©gion de Dakar"
        fraisLivraisonInterne:
          type: number
          format: float
          description: Frais de livraison dans la m√™me r√©gion (FCFA)
          example: 500
        fraisLivraisonExterne:
          type: number
          format: float
          description: Frais de livraison vers d'autres r√©gions (FCFA)
          example: 2000
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        gies:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              nom:
                type: string
              email:
                type: string
        commandes:
          type: array
          items:
            type: object
            properties:
              id:
                type: string
              numero:
                type: string
        adresses:
          type: array
          items:
            $ref: '#/components/schemas/Adresse'

    CreateRegionDto:
      type: object
      required:
        - nom
      properties:
        nom:
          type: string
          description: Nom de la r√©gion (doit √™tre unique)
          example: "Dakar"
        description:
          type: string
          description: Description de la r√©gion
          example: "R√©gion de Dakar"
        fraisLivraisonInterne:
          type: number
          format: float
          description: Frais de livraison dans la m√™me r√©gion (FCFA)
          example: 500
        fraisLivraisonExterne:
          type: number
          format: float
          description: Frais de livraison vers d'autres r√©gions (FCFA)
          example: 2000

    UpdateRegionDto:
      type: object
      properties:
        nom:
          type: string
          description: Nouveau nom de la r√©gion
          example: "Dakar M√©tropole"
        description:
          type: string
          description: Nouvelle description
          example: "R√©gion m√©tropolitaine de Dakar"
        fraisLivraisonInterne:
          type: number
          format: float
          description: Nouveaux frais de livraison interne
          example: 600
        fraisLivraisonExterne:
          type: number
          format: float
          description: Nouveaux frais de livraison externe
          example: 2500

    Adresse:
      type: object
      properties:
        id:
          type: string
          example: "adresse-centre-dakar"
        nom:
          type: string
          example: "Centre-ville Dakar"
        description:
          type: string
          example: "Zone centrale de Dakar"
        codePostal:
          type: string
          example: "DAK001"
        fraisLivraison:
          type: number
          format: float
          description: Frais de livraison sp√©cifiques √† cette adresse (FCFA)
          example: 0
        regionId:
          type: string
          example: "region-dakar"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        region:
          $ref: '#/components/schemas/Region'

    CreateAdresseDto:
      type: object
      required:
        - nom
        - regionId
      properties:
        nom:
          type: string
          description: Nom de l'adresse
          example: "Centre-ville Dakar"
        description:
          type: string
          description: Description de l'adresse
          example: "Zone centrale de Dakar"
        codePostal:
          type: string
          description: Code postal
          example: "DAK001"
        fraisLivraison:
          type: number
          format: float
          description: Frais de livraison sp√©cifiques √† cette adresse (FCFA)
          example: 0
        regionId:
          type: string
          description: ID de la r√©gion associ√©e
          example: "region-dakar"

    UpdateAdresseDto:
      type: object
      properties:
        nom:
          type: string
          description: Nouveau nom de l'adresse
          example: "Centre-ville Dakar M√©tropole"
        description:
          type: string
          description: Nouvelle description
          example: "Zone centrale de Dakar M√©tropole"
        codePostal:
          type: string
          description: Nouveau code postal
          example: "DAK001"
        fraisLivraison:
          type: number
          format: float
          description: Nouveaux frais de livraison sp√©cifiques
          example: 100
        regionId:
          type: string
          description: Nouvelle r√©gion associ√©e
          example: "region-dakar"

    Livreur:
      type: object
      properties:
        id:
          type: string
          example: "livreur-123"
        nom:
          type: string
          example: "Diop"
        prenom:
          type: string
          example: "Moussa"
        email:
          type: string
          format: email
          example: "moussa.diop@livraison.com"
        telephone:
          type: string
          example: "+221701234567"
        statut:
          type: string
          enum: [DISPONIBLE, EN_LIVRAISON, INDISPONIBLE, BLOQUE]
          example: "DISPONIBLE"
        regionId:
          type: string
          example: "region-dakar"
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        region:
          $ref: '#/components/schemas/Region'
        commandes:
          type: array
          items:
            $ref: '#/components/schemas/Commande'

    CreateLivreurDto:
      type: object
      required:
        - nom
        - prenom
        - email
        - telephone
        - password
      properties:
        nom:
          type: string
          description: Nom de famille du livreur
          example: "Diop"
        prenom:
          type: string
          description: Pr√©nom du livreur
          example: "Moussa"
        email:
          type: string
          format: email
          description: Email unique du livreur
          example: "moussa.diop@livraison.com"
        telephone:
          type: string
          description: Num√©ro de t√©l√©phone du livreur
          example: "+221701234567"
        password:
          type: string
          description: Mot de passe du livreur (sera hash√©)
          example: "password123"
        regionId:
          type: string
          description: ID de la r√©gion d'affectation (optionnel)
          example: "region-dakar"

    UpdateLivreurDto:
      type: object
      properties:
        nom:
          type: string
          description: Nouveau nom de famille
          example: "Diop"
        prenom:
          type: string
          description: Nouveau pr√©nom
          example: "Moussa"
        email:
          type: string
          format: email
          description: Nouvel email
          example: "moussa.diop@livraison.com"
        telephone:
          type: string
          description: Nouveau num√©ro de t√©l√©phone
          example: "+221701234567"
        statut:
          type: string
          enum: [DISPONIBLE, EN_LIVRAISON, INDISPONIBLE, BLOQUE]
          description: Nouveau statut du livreur
          example: "DISPONIBLE"
        regionId:
          type: string
          description: Nouvelle r√©gion d'affectation
          example: "region-dakar"

    LoginLivreurDto:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          description: Email du livreur
          example: "moussa.diop@livraison.com"
        password:
          type: string
          description: Mot de passe du livreur
          example: "password123"

tags:
  - name: Sant√©
    description: Endpoints de sant√© de l'API
  - name: Authentification
    description: Endpoints d'authentification et d'autorisation
  - name: Cat√©gories
    description: Gestion des cat√©gories de produits
  - name: GIE
    description: Gestion des Groupements d'Int√©r√™t √âconomique
  - name: Produits
    description: Gestion des produits
  - name: Clients
    description: Gestion des clients
  - name: Commandes
    description: Gestion des commandes avec frais de livraison automatiques
  - name: Paiements
    description: Gestion des paiements
  - name: R√©gions
    description: Gestion des r√©gions et frais de livraison
  - name: Adresses
    description: Gestion des adresses de livraison
  - name: Livreurs
    description: Gestion des livreurs et syst√®me de livraison 